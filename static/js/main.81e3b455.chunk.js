(this.webpackJsonpshareable=this.webpackJsonpshareable||[]).push([[0],{129:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),i=r(31),o=r.n(i),s=(r(84),r(6)),c=r(11),u=r.n(c),l=r(17),d=r(4),f=r(5),h=r(9),p=r(8),m=(r(86),r(34)),g=r(43),y=r(63),b=r.n(y),v=r(75),k=r(24),S=r(65),T=r.n(S),O=r(2),E=r(7),j=r(37),x=r(3),w=r(26),C=r(25),P=r(73),L=r(74),I=r(33),A=r(22),D={track:void 0,isPlaying:!1},U=Object(C.combineReducers)({focusedTrack:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A.a.SET_FOCUSED:var r=e.track,n=(r=void 0===r?{}:r).id;return t.payload&&n!==t.payload.id?Object(s.a)({},e,{track:t.payload,isPlaying:!0}):e;case A.a.PAUSE_FOCUSED:return Object(s.a)({},e,{track:t.payload,isPlaying:!1});default:return e}}}),M=[L.a],_=I.a.obfuscateDevTools?Object(C.createStore)(U,C.applyMiddleware.apply(void 0,M)):Object(C.createStore)(U,Object(P.composeWithDevTools)(C.applyMiddleware.apply(void 0,M))),R=function(e){Object(h.a)(r,e);var t=Object(p.a)(r);function r(e){var n;return Object(d.a)(this,r),(n=t.call(this,e)).state={loggedIn:!1},n}return Object(f.a)(r,[{key:"componentDidMount",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=x.b.resolveUserToken(),this.setState({loggedIn:!!t});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderRoutes",value:function(){var e=this.state.loggedIn,t=this.props.isMobile,r=Object(s.a)({},H.routeContainer,{marginLeft:Object(O.f)(t),marginRight:Object(O.f)(t)});return a.a.createElement("div",{style:r},!e&&a.a.createElement(j.b,null),e&&a.a.createElement(m.c,null,w.a.map((function(e){var t=e.path,r=e.page;return a.a.createElement(m.a,{key:e.path,exact:!0,path:t,component:r})}))))}},{key:"render",value:function(){var e=this.state.loggedIn,t=this.props.isMobile;return a.a.createElement(k.a,{store:_},a.a.createElement(g.a,{basename:"/shareable/"},a.a.createElement("div",{style:H.app},a.a.createElement(E.c,{isMobile:t}),this.renderRoutes(),e&&a.a.createElement(E.b,null))))}}]),r}(a.a.Component),F=Object(v.hot)(b()(w.c)(R)),H={app:{backgroundImage:"linear-gradient(to top, rgba(24, 13, 34, 0.52), rgba(2, 10, 26, 0.78)), url(".concat(T.a,")"),backgroundSize:"100% 100%",minHeight:"100vh",display:"flex",flexDirection:"column",color:O.c.c100,fontFamily:"Muli",fontWeight:500},routeContainer:{marginTop:O.b,marginBottom:O.a,paddingTop:O.e.s24,overflow:"auto"}};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},13:function(e,t,r){"use strict";r.d(t,"b",(function(){return s})),r.d(t,"a",(function(){return n}));var n,a=r(50),i=r(4),o=r(5);!function(e){e.SpotifyToken="shrbl_spotify_token",e.UserProfile="shrbl_user",e.KeyDecay="shrbl_key_decay"}(n||(n={}));var s=new(function(){function e(){Object(i.a)(this,e),this.storage=localStorage}return Object(o.a)(e,[{key:"get",value:function(e){try{return this.storage.getItem(e)}catch(t){}return null}},{key:"set",value:function(e,t){try{this.storage.setItem(e,t)}catch(r){console.log(r)}}},{key:"setExpiration",value:function(e,t){var r=this.get(n.KeyDecay),a=r&&JSON.parse(r)||{};a[e]=Date.now()+t,this.set(n.KeyDecay,JSON.stringify(a))}},{key:"checkExpiration",value:function(){var e,t=this;if(e=JSON.parse(this.get(n.KeyDecay)||"null")){var r=Date.now();Object.entries(e).forEach((function(n){var i=Object(a.a)(n,2),o=i[0],s=i[1];r<=Number(s)||(t.remove(o),delete e[o])})),this.set(n.KeyDecay,JSON.stringify(e))}}},{key:"remove",value:function(e){try{this.storage.removeItem(e)}catch(t){}}}]),e}())},2:function(e,t,r){"use strict";var n;r.d(t,"e",(function(){return n})),r.d(t,"f",(function(){return i})),r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return s})),r.d(t,"d",(function(){return c})),r.d(t,"c",(function(){return a})),function(e){e[e.s0=0]="s0",e[e.s2=2]="s2",e[e.s4=4]="s4",e[e.s8=8]="s8",e[e.s12=12]="s12",e[e.s16=16]="s16",e[e.s24=24]="s24",e[e.s32=32]="s32",e[e.s48=48]="s48",e[e.s64=64]="s64",e[e.s128=128]="s128",e[e.s224=224]="s224",e[e.s512=512]="s512"}(n||(n={}));var a,i=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e?n.s24:n.s224},o=n.s64,s=n.s512,c={ExtraLarge:{fontSize:48,lineHeight:"54px"},Large:{fontSize:36,lineHeight:"54px"},MediumLarge:{fontSize:28,lineHeight:"36px"},Medium:{fontSize:20,lineHeight:"30px"},MediumSmall:{fontSize:14,lineHeight:"20px"},Small:{fontSize:12,lineHeight:"18px"},ExtraSmall:{fontSize:11,lineHeight:"16px"}};!function(e){e.ShareableLavender="#6767d7",e.ShareableLightLavender="#7b7bf9",e.c600="#1C2124",e.c500="#66747D",e.c400="#86939C",e.c300="#C7D0D6",e.c200="#E4E9ED",e.c100="#F5F8FA",e.c0="#FFF",e.ScreenBackground="#282c34",e.White="#fff",e.Black="#000",e.Transparent="rgba(52, 52, 52, 0)",e.TransparentDark="rgba(52, 52, 52, 0.9)",e.DisabledText="#ababab",e.DisabledBackground="#ffffff30"}(a||(a={}))},22:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"c",(function(){return o})),r.d(t,"b",(function(){return s}));var n,a=r(54),i=r(3);!function(e){e.PAUSE_FOCUSED="PAUSE_FOCUSED",e.SET_FOCUSED="SET_FOCUSED"}(n||(n={}));var o=function(e){return Object(a.action)(n.SET_FOCUSED,e)},s=function(e){return function(t){i.b.playSongs([e.uri]),t(o(e))}}},26:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"d",(function(){return a})),r.d(t,"a",(function(){return o})),r.d(t,"c",(function(){return s}));var n=window.location.hash.substring(1).split("&").reduce((function(e,t){if(t){var r=t.split("=");e[r[0]]=decodeURIComponent(r[1])}return e}),{});function a(e){return e.text().then((function(e){return e?JSON.parse(e):{}}))}window.location.hash="";var i=r(37),o=[{path:"/",page:i.b,header:"shareable"},{path:"/stats",page:i.c,header:"stats"},{path:"/stream",page:i.d,header:"stream"},{path:"/account",page:i.a,header:"account",rightAlignedHeader:!0}],s=function(e){return{isMobile:e.width<500}}},3:function(e,t,r){"use strict";r.d(t,"b",(function(){return n.a})),r.d(t,"a",(function(){return a.a})),r.d(t,"c",(function(){return i.b})),r.d(t,"d",(function(){return i.c}));var n=r(46),a=r(30),i=r(40)},30:function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"d",(function(){return i})),r.d(t,"e",(function(){return o})),r.d(t,"f",(function(){return s})),r.d(t,"c",(function(){return c})),r.d(t,"a",(function(){return u}));var n=r(33),a="".concat("https://api.spotify.com","/v1/me/player"),i="".concat("https://api.spotify.com","/v1/me/tracks"),o="".concat("https://api.spotify.com","/v1/me"),s="".concat("https://api.spotify.com","/v1/me/top"),c="".concat("https://api.spotify.com","/v1/me/player/play"),u="".concat("https://accounts.spotify.com/authorize","?client_id=").concat(n.a.clientId,"&redirect_uri=").concat(n.a.redirectUri,"&scope=").concat(n.a.scopes.join("%20"),"&response_type=token&show_dialog=true")},33:function(e,t,r){"use strict";var n=r(6),a={redirectUri:"https://thmsngyn.github.io/shareable/",obfuscateDevTools:!0,shareableServiceUri:"http://localhost:4000"};t.a=Object(n.a)({clientId:"05b0a9e4fb784b1c866f6235ae139c3a",scopes:["user-top-read","user-read-currently-playing","user-read-playback-state","user-library-read","streaming","user-read-email","user-read-private","user-library-modify","user-follow-read"]},a)},35:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n,a=r(16),i=r(76),o=r(4),s=r(5),c=r(9),u=r(8),l=r(0),d=r.n(l),f=r(36),h=r(130),p=r(131),m=r(2);!function(e){e.Primary="primary",e.Secondary="secondary"}(n||(n={}));var g=function(e){Object(c.a)(r,e);var t=Object(u.a)(r);function r(e){return Object(o.a)(this,r),t.call(this,e)}return Object(s.a)(r,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.children,r=e.classes,n=(e.buttonType,Object(i.a)(e,["children","classes","buttonType"]));return d.a.createElement(h.a,Object.assign({},n,{className:"".concat(r.root," ").concat(this.secondaryClass," ").concat(r.label)}),t)}},{key:"secondaryClass",get:function(){var e=this.props,t=e.buttonType,r=void 0===t?n.Primary:t,a=e.classes;return r===n.Secondary?a.secondary:""}}]),r}(d.a.Component);t.b=Object(f.a)((function(e){var t;return Object(p.a)({root:(t={fontFamily:"Muli",fontWeight:800,color:m.c.White,background:m.c.ShareableLavender,height:48,padding:"0 25px",borderRadius:4,letterSpacing:.6},Object(a.a)(t,e.breakpoints.down("sm"),{width:"100%",margin:"".concat(m.e.s8,"px 0px")}),Object(a.a)(t,"&:hover",{backgroundColor:m.c.ShareableLightLavender}),Object(a.a)(t,"&:disabled",{color:m.c.DisabledText,backgroundColor:m.c.DisabledBackground,border:0}),t),secondary:{background:"transparent",border:"solid",borderWidth:1,borderColor:m.c.White,"&:hover":{backgroundColor:m.c.ShareableLavender,borderColor:m.c.ShareableLavender,borderWidth:1}},label:{textTransform:"none"}})}))(g)},37:function(e,t,r){"use strict";r.d(t,"d",(function(){return g})),r.d(t,"b",(function(){return O})),r.d(t,"a",(function(){return P})),r.d(t,"c",(function(){return R}));var n=r(11),a=r.n(n),i=r(17),o=r(4),s=r(5),c=r(9),u=r(8),l=r(0),d=r.n(l),f=r(7),h=r(3),p=function(e){Object(c.a)(r,e);var t=Object(u.a)(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(s.a)(r,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.children,r=e.hasError,n=e.isLoading;return r?d.a.createElement(f.e,{headerText:"Something bad happened...",subText:"Please refresh the page and try again."},d.a.createElement("div",{style:m.animation},d.a.createElement("lottie-player",{src:"https://assets3.lottiefiles.com/packages/lf20_3x5I70.json",background:"transparent",speed:"1",style:{width:350,height:"auto"},loop:!0,autoplay:!0}))):n?d.a.createElement(f.e,null,d.a.createElement("div",{style:m.animation},d.a.createElement("lottie-player",{src:"https://assets8.lottiefiles.com/packages/lf20_6R2HIH.json",background:"transparent",speed:"2",style:{width:350,height:350},loop:!0,autoplay:!0}))):t}}]),r}(d.a.Component),m={animation:{display:"flex",justifyContent:"center"}},g=function(e){Object(c.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(o.a)(this,r),(n=t.call(this,e)).state={currentTrack:void 0,is_playing:!0,progress_ms:0,likes:[],hasError:!1},n}return Object(s.a)(r,[{key:"componentDidMount",value:function(){var e=this;this.setCurrentlyPlayingState((function(t){e.setState({hasError:!0})})),this.setLikesState((function(t){e.setState({hasError:!0})}))}},{key:"setCurrentlyPlayingState",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.b.getCurrentlyPlaying();case 2:if(r=e.sent,!(n=r.error)){e.next=6;break}return e.abrupt("return",t(n));case 6:this.setState({currentTrack:r.item});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setLikesState",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.b.getLikes();case 2:if(r=e.sent,!(n=r.error)){e.next=6;break}return e.abrupt("return",t(n));case 6:this.setState({likes:r.items});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.hasError,r=e.currentTrack,n=e.likes,a=!r&&!n.length;return d.a.createElement(p,{hasError:t,isLoading:a},d.a.createElement(f.e,{headerText:"Stream feed",subText:"Under development. The intent of this page is to be a live stream of music your friends like."}))}}]),r}(d.a.Component),y=r(50),b=r(24),v=r(22),k=r(51),S=function(e){Object(c.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(o.a)(this,r),(n=t.call(this,e)).state={hasError:!1,loggedIn:!1,isLoading:!0,name:"",likes:[]},n}return Object(s.a)(r,[{key:"resolveUser",value:function(e){var t={spotifyUserId:e.id};k.ShareableService.login(t).then((function(e){var r=e.code;r&&r===k.ShareableErrorCodes.AccountNotFound&&k.ShareableService.register(t).then((function(e){}))}))}},{key:"componentDidMount",value:function(){var e=this,t=h.b.userIsLoggedIn();t&&Promise.all([h.b.userProfile().then((function(t){return e.setState({name:t.name.split(" ")[0]}),t})),this.setCurrentlyPlayingState((function(t){e.setState({hasError:!0})})),this.setLikesState((function(t){e.setState({hasError:!0})}))]).then((function(t){var r=Object(y.a)(t,3);r[0],r[1],r[2];e.setState({isLoading:!1})})),this.setState({loggedIn:t})}},{key:"setCurrentlyPlayingState",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var r,n,i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.props.setFocusedTrack,e.next=3,h.b.getCurrentlyPlaying();case 3:if(n=e.sent,i=n.error,o=n.item,!i){e.next=7;break}return e.abrupt("return",t(i));case 7:n.item&&r&&r(o);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setLikesState",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.b.getLikes();case 2:if(r=e.sent,!(n=r.error)){e.next=6;break}return e.abrupt("return",t(n));case 6:this.setState({likes:r.items});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.hasError,r=e.loggedIn,n=e.name,a=e.isLoading,i=e.likes,o=this.props.focusedTrack;return d.a.createElement(p,{hasError:t,isLoading:r&&a},!r&&d.a.createElement(l.Fragment,null,d.a.createElement(f.e,{headerText:"Welcome!",subText:"Please login with your spotify credentials to continue."},d.a.createElement(f.a,{href:h.a},"Login to Spotify"))),r&&d.a.createElement(l.Fragment,null,d.a.createElement(f.e,{headerText:"Welcome ".concat(n,"!"),subText:"You can now play music and view your personalized stats."}),d.a.createElement(f.e,{headerText:"Currently playing"},d.a.createElement(f.f,{track:o})),d.a.createElement(f.e,{headerText:"Likes"},i.map((function(e,t){return d.a.createElement(f.f,{key:t,track:e.track})})))))}}]),r}(d.a.Component),T={setFocusedTrack:v.c},O=Object(b.b)((function(e){return{focusedTrack:e.focusedTrack.track}}),T)(S),E=r(66),j=r.n(E),x=r(47),w=r(13),C=r(35),P=function(e){Object(c.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(o.a)(this,r),(n=t.call(this,e)).state={hasError:!1,userProfile:{}},n}return Object(s.a)(r,[{key:"componentDidMount",value:function(){var e=this;this.setUserProfile((function(){e.setState({hasError:!0})}))}},{key:"setUserProfile",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.b.userProfile();case 2:if(r=e.sent,!(n=r.error)){e.next=6;break}return e.abrupt("return",t(n));case 6:this.setState({userProfile:r});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){Object.keys(w.a).forEach((function(e){return w.b.remove(w.a[e])})),h.b.logout(),this.props.history.push("/"),window.location.reload()}},{key:"render",value:function(){var e=this,t=this.state,r=t.hasError,n=t.userProfile;return d.a.createElement(p,{hasError:r,isLoading:!1},d.a.createElement(f.e,{headerText:"Account information"},d.a.createElement(f.d,{style:L.profile,imageStyle:L.image,imageUrl:n.imageUrl||j.a,onClickImage:function(){return window.open(n.externalUrl,"_blank")},info:{name:n.name,email:n.email,country:n.country,followers:n.followers}})),d.a.createElement(f.e,null,d.a.createElement(x.a,{buttonType:C.a.Secondary,onClick:function(){e.logout()}},"Logout")))}}]),r}(d.a.Component),L={profile:{width:"100%"},image:{width:80,height:"auto"}},I=r(6),A=r(16),D=r(2),U=r(147),M=function(e){Object(c.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(o.a)(this,r),(n=t.call(this,e)).maxTopPageOffset=5,n.topLimit=10,n.state={topArtistsTimeRange:h.c.ShortTerm,topTracksTimeRange:h.c.ShortTerm,hasError:!1,isLoading:!0,topArtistsPage:0,topTracksPage:0},n}return Object(s.a)(r,[{key:"componentDidMount",value:function(){var e=this;this.setTopsState((function(){return e.setState({hasError:!0})}))}},{key:"setTopsState",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var r,n,i,o,s,c,u,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.state,n=r.topArtistsTimeRange,i=r.topTracksTimeRange,o=r.topArtistsPage,s=r.topTracksPage,e.next=3,h.b.getTop(h.d.Artists,n,this.topLimit,o*this.topLimit);case 3:return c=e.sent,e.next=6,h.b.getTop(h.d.Tracks,i,this.topLimit,s*this.topLimit);case 6:if(u=e.sent,l=c.error,d=u.error,!l&&!d){e.next=11;break}return e.abrupt("return",t(l,d));case 11:this.setState({topArtists:c,topTracks:u,isLoading:!1});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"renderTimeRangeButtons",value:function(e){var t,r=this,n=(t={},Object(A.a)(t,h.c.ShortTerm,"Last 4 weeks"),Object(A.a)(t,h.c.MediumTerm,"Last 6 months"),Object(A.a)(t,h.c.LongTerm,"Last several years"),t),a=[h.c.ShortTerm,h.c.MediumTerm,h.c.LongTerm],i=e===h.d.Artists?"topArtistsTimeRange":"topTracksTimeRange";return d.a.createElement("div",{style:Object(I.a)({},_.row,{},_.timeToggle)},a.map((function(e,t){return d.a.createElement(f.a,{key:t,onClick:function(){r.setState(Object(A.a)({},i,e),(function(){return r.setTopsState((function(){return r.setState({hasError:!0})}))}))}},n[e])})))}},{key:"scrollTopTypeStart",value:function(e){var t=document.getElementById(e);t&&(t.scrollLeft=0)}},{key:"incrementPage",value:function(e,t){var r=this,n=e===h.d.Artists?"topArtistsPage":"topTracksPage";this.setState((function(e){var a=e[n],i=a+t>=r.maxTopPageOffset?0:a+t;return Object(A.a)({},n,i)}),(function(){r.setTopsState((function(){return r.setState({hasError:!0})})),r.scrollTopTypeStart(e)}))}},{key:"renderPageChange",value:function(e){var t=this,r=e===h.d.Artists?"topArtistsPage":"topTracksPage",n=this.state[r];return d.a.createElement("div",{style:Object(I.a)({},_.row,{},_.pageToggle)},d.a.createElement(f.a,{style:{width:"auto"},disabled:0===n,buttonType:C.a.Secondary,onClick:function(){return t.incrementPage(e,-1)}},"Back"),d.a.createElement(f.a,{style:{width:"auto"},disabled:n+1===this.maxTopPageOffset,buttonType:C.a.Secondary,onClick:function(){return t.incrementPage(e,1)}},"Next"),d.a.createElement("div",null,"Page ",n+1))}},{key:"render",value:function(){var e,t=this,r=this.state,n=r.hasError,a=r.topArtists,i=r.topTracks,o=r.isLoading,s=r.topArtistsTimeRange,c=r.topTracksTimeRange,u=r.topArtistsPage,l=r.topTracksPage,m=(e={},Object(A.a)(e,h.c.ShortTerm,"Last 4 weeks"),Object(A.a)(e,h.c.MediumTerm,"Last 6 months"),Object(A.a)(e,h.c.LongTerm,"Last several years"),e);return d.a.createElement(p,{hasError:n,isLoading:o},d.a.createElement("div",null,d.a.createElement(f.e,{headerText:"Top artists (".concat(m[s],")")},this.renderTimeRangeButtons(h.d.Artists),d.a.createElement("div",{id:h.d.Artists,style:this.responsiveRowStyle},a&&a.items.map((function(e,r){return d.a.createElement(f.d,{key:r,style:t.responsiveProfileStyles,imageStyle:_.image,imageUrl:e.images[0].url,onClickImage:function(){return window.open(e.external_urls.spotify,"_blank")},displayKeys:!1,info:{rank:"".concat(r+10*u+1),name:e.name,genres:e.genres.join(", ")}})}))),this.renderPageChange(h.d.Artists))),d.a.createElement("div",null,d.a.createElement(f.e,{headerText:"Top tracks (".concat(m[c],")")},this.renderTimeRangeButtons(h.d.Tracks),d.a.createElement("div",{id:h.d.Tracks,style:this.responsiveRowStyle},i&&i.items.map((function(e,r){return d.a.createElement(f.d,{key:r,style:t.responsiveProfileStyles,imageStyle:_.image,imageUrl:e.album.images[0].url,onClickImage:function(){return t.props.playSong(e)},displayKeys:!1,info:{rank:"".concat(r+10*l+1),title:e.name,artist:e.artists[0].name}})}))),this.renderPageChange(h.d.Tracks))))}},{key:"responsiveRowStyle",get:function(){var e=this.props.width,t=Object(U.b)("sm",e)?{overflowX:"auto",flexDirection:"column",flexWrap:"wrap",alignItems:"flex-start",height:"325px",width:"auto"}:{};return Object(I.a)({},_.row,{},t)}},{key:"responsiveProfileStyles",get:function(){var e=this.props.width,t=Object(U.b)("sm",e)?{width:"fit-content",marginRight:D.e.s16}:{};return Object(I.a)({},_.profile,{},t)}}]),r}(d.a.Component),_={row:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between",marginBottom:D.e.s16,scrollBehavior:"smooth"},profile:{width:500,marginBottom:D.e.s12,marginRight:D.e.s48},image:{width:100,height:100},timeToggle:{maxWidth:"525px"},pageToggle:{maxWidth:"275px",flexWrap:"nowrap"}},R=Object(b.b)(void 0,(function(e){return{playSong:function(t){return e(Object(v.b)(t))}}}))(Object(U.a)()(M))},38:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return n}));var n,a=r(33).a.shareableServiceUri,i="".concat(a,"/accounts/login"),o="".concat(a,"/accounts");"".concat(a,"/stream"),"".concat(a,"/stream/share"),"".concat(a,"/stream/share");!function(e){e[e.AccountNotFound=1e3]="AccountNotFound",e[e.EntityAlreadyExists=1001]="EntityAlreadyExists",e[e.InvalidAccessSpotifyAccessToken=1002]="InvalidAccessSpotifyAccessToken",e[e.SpotifyAccessTokenExpired=1003]="SpotifyAccessTokenExpired"}(n||(n={}))},40:function(e,t,r){"use strict";var n,a,i;r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return i})),function(e){e.ShortTerm="short_term",e.MediumTerm="medium_term",e.LongTerm="long_term"}(n||(n={})),function(e){e.Artists="artists",e.Tracks="tracks"}(a||(a={})),function(e){e.TokenExpired="The access token expired"}(i||(i={}))},46:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var n=r(11),a=r.n(n),i=r(17),o=r(4),s=r(5),c=r(26),u=r(13),l=r(30),d=r(40),f=new(function(){function e(){Object(o.a)(this,e),this.token=""}return Object(s.a)(e,[{key:"resolveTokenInStorage",value:function(e,t){e?u.b.checkExpiration():(u.b.set(u.a.SpotifyToken,t),u.b.setExpiration(u.a.SpotifyToken,36e6))}},{key:"logout",value:function(){this.token=""}},{key:"userProfile",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,r,n,i,o,s,c,l,d,f,h,p,m,g;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.b.get(u.a.UserProfile)){e.next=13;break}return e.next=4,this.getUserProfile();case 4:return r=e.sent,n=r.display_name,i=r.external_urls,o=r.images,s=r.email,c=r.country,l=r.followers,d=r.error,f=r.uri,h=r.id,p=o&&o.length&&o[0].url,m=i&&i.spotify,g={name:n,externalUrl:m,email:s,country:c,imageUrl:p,followers:l&&l.total,error:d,uri:f,id:h},u.b.set(u.a.UserProfile,JSON.stringify(g)),e.abrupt("return",g);case 13:return e.abrupt("return",JSON.parse(t));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"userIsLoggedIn",value:function(){return!!this.token}},{key:"resolveUserToken",value:function(){this.token=c.b.access_token;var e=u.b.get(u.a.SpotifyToken);return e||this.token?(this.token=e||this.token,this.resolveTokenInStorage(!!e,this.token),this.token):""}},{key:"getUserProfile",value:function(){return this.request(l.e,"GET")}},{key:"getCurrentlyPlaying",value:function(){return this.request(l.b,"GET")}},{key:"transferPlayback",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.request(l.b,"PUT",{device_ids:e,play:t})}},{key:"getLikes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.request("".concat(l.d,"?limit=").concat(e,"&offset=").concat(t),"GET")}},{key:"getTop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.b.ShortTerm,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this.request("".concat(l.f,"/").concat(e,"?limit=").concat(r,"&offset=").concat(n,"&time_range=").concat(t),"GET")}},{key:"playSongs",value:function(e){return this.request("".concat(l.c),"PUT",{uris:e})}},{key:"request",value:function(e,t,r){return fetch(e,{method:t,headers:this.headers,body:JSON.stringify(r)}).then(c.d).then(this.errorHandler.bind(this))}},{key:"errorHandler",value:function(e){var t=e.error;if(t)switch(t.message){case d.a.TokenExpired:u.b.remove(u.a.SpotifyToken)}return e}},{key:"headers",get:function(){return new Headers({Authorization:"Bearer "+this.token})}}]),e}())},47:function(e,t,r){"use strict";r.d(t,"b",(function(){return d})),r.d(t,"a",(function(){return h.b}));var n=r(6),a=r(4),i=r(5),o=r(9),s=r(8),c=r(0),u=r.n(c),l=r(2),d=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.headerText,r=e.subText,n=e.children;return u.a.createElement("div",{style:f.streamSection},t&&u.a.createElement("div",{style:f.headerText},t),r&&u.a.createElement("div",{style:f.subText},r),n)}}]),r}(u.a.Component),f={streamSection:{marginTop:l.e.s32},headerText:Object(n.a)({marginBottom:l.e.s16,fontFamily:"Muli",fontWeight:600},l.d.Medium),subText:{marginBottom:l.e.s16}},h=r(35)},51:function(e,t,r){"use strict";var n=r(58);r.d(t,"ShareableService",(function(){return n.a}));var a=r(38);r.d(t,"ShareableErrorCodes",(function(){return a.c}));r(59)},58:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(6),a=r(4),i=r(5),o=r(26),s=r(46),c=r(38),u=new(function(){function e(){Object(a.a)(this,e)}return Object(i.a)(e,[{key:"login",value:function(e){return this.request(c.a,"POST",Object(n.a)({},e,{token:this.spotifyToken}))}},{key:"register",value:function(e){return this.request(c.b,"POST",Object(n.a)({},e,{token:this.spotifyToken}))}},{key:"request",value:function(e,t,r){return fetch(e,{method:t,headers:this.headers,body:JSON.stringify(r)}).then(o.d).then(this.errorHandler.bind(this))}},{key:"errorHandler",value:function(e){e.error;return e}},{key:"spotifyToken",get:function(){return s.a.resolveUserToken()}},{key:"headers",get:function(){return new Headers({"Content-Type":"application/json"})}}]),e}())},59:function(e,t){},65:function(e,t,r){e.exports=r.p+"static/media/bg.336ebad2.jpg"},66:function(e,t,r){e.exports=r.p+"static/media/badminton.c7bae4fd.png"},7:function(e,t,r){"use strict";r.d(t,"f",(function(){return m})),r.d(t,"b",(function(){return O})),r.d(t,"c",(function(){return P})),r.d(t,"e",(function(){return I.b})),r.d(t,"a",(function(){return I.a})),r.d(t,"d",(function(){return A}));var n=r(6),a=r(4),i=r(5),o=r(9),s=r(8),c=r(0),u=r.n(c),l=r(24),d=(r(91),r(92),r(2)),f=r(22),h=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:"renderArtists",value:function(){var e=this.props.track;return u.a.createElement("div",{style:p.artistName},e.artists.map((function(e){return e.name})).join(", "))}},{key:"renderTrackTitle",value:function(){var e=this.props.track;return u.a.createElement("div",{style:p.trackTitle},e.name)}},{key:"hasData",value:function(e){return e&&e.album.images[0].url&&e.artists}},{key:"render",value:function(){var e=this,t=this.props.track;return u.a.createElement("div",{className:"track",style:p.track},this.hasData(t)?u.a.createElement(c.Fragment,null,u.a.createElement("div",{style:p.coverArt},u.a.createElement("img",{alt:"trackImage",className:"art",src:t.album.images[0].url,onClick:function(){return e.props.playSong(t)}})),u.a.createElement("div",{className:"track__content"},this.renderArtists(),this.renderTrackTitle())):u.a.createElement("div",null,"Nothing found"))}}]),r}(u.a.Component),p={progress:{marginTop:d.e.s16},artistName:Object(n.a)({},d.d.MediumSmall),track:{marginBottom:d.e.s24},coverArt:{marginRight:d.e.s16},trackTitle:Object(n.a)({},d.d.Large)},m=Object(l.b)(void 0,(function(e){return{playSong:function(t){return e(Object(f.b)(t))}}}))(h),g=r(70),y=r.n(g),b=r(3),v=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).state={token:"",deviceId:""},n}return Object(i.a)(r,[{key:"componentDidMount",value:function(){var e=b.b.resolveUserToken();e&&this.setState({token:e})}},{key:"setDevice",value:function(e,t){!this.state.deviceId&&e&&(t||(this.setState({deviceId:e}),b.b.transferPlayback([e])))}},{key:"syncCurrentlyPlaying",value:function(e){this.props.setFocusedTrack(Object(n.a)({},e,{artists:e.artists.split(", ").map((function(e){return{name:e}})),album:{images:[{url:e.image}]}}))}},{key:"handlePlayerCallback",value:function(e){var t=e.deviceId,r=e.isActive,n=e.track;this.setDevice(t,r),this.syncCurrentlyPlaying(n)}},{key:"render",value:function(){return u.a.createElement(y.a,{name:"Shareable Web Player",styles:k.custom,token:this.state.token,autoPlay:!0,showSaveIcon:!0,persistDeviceSelection:!0,callback:this.handlePlayerCallback.bind(this)})}}]),r}(u.a.Component),k={custom:{sliderColor:d.c.ShareableLavender,savedColor:d.c.ShareableLavender}},S={setFocusedTrack:f.c},T=Object(l.b)(void 0,S)(v),O=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return u.a.createElement("div",{style:E.footer},u.a.createElement(T,null))}}]),r}(u.a.Component),E={footer:{position:"fixed",left:0,bottom:0,width:"100%"}},j=r(43),x=r(71),w=r.n(x),C=r(26),P=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:"componentDidMount",value:function(){}},{key:"renderHeaderItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=function(e){return!e.header||e.header&&!0===e.rightAlignedHeader},r=function(e){return!e.header||e.header&&!e.rightAlignedHeader};return C.a.filter((function(n){return e?t(n):r(n)})).map((function(e){return u.a.createElement(j.b,{key:e.path,exact:!0,to:e.path,style:L.headerItem,activeStyle:L.headerItemActive},e.header)}))}},{key:"render",value:function(){return u.a.createElement("div",{style:L.header},u.a.createElement("div",{style:this.responsiveHeaderStyle},u.a.createElement("div",{style:this.responsiveLeftHeaderStyle},u.a.createElement(j.b,{exact:!0,to:"/",style:L.headerItem,activeStyle:L.headerItemActive},u.a.createElement("img",{style:L.logo,src:w.a,alt:"logo"})),this.renderHeaderItem()),u.a.createElement("div",{style:L.headerRight},this.renderHeaderItem(!0))))}},{key:"responsiveHeaderStyle",get:function(){var e=this.props.isMobile,t=Object(n.a)({},L.headerContents,{paddingLeft:Object(d.f)(e),paddingRight:Object(d.f)(e)});return e&&(t=Object(n.a)({},t,{fontSize:t.fontSize-6})),t}},{key:"responsiveLeftHeaderStyle",get:function(){var e=this.props.isMobile;return Object(n.a)({},L.headerLeft,{width:e?250:300})}}]),r}(u.a.Component),L={header:{width:"100%",position:"fixed",left:0,top:0,backgroundColor:d.c.White,color:d.c.ScreenBackground,height:d.b,zIndex:1},headerContents:Object(n.a)({display:"flex",alignItems:"center",height:"100%"},d.d.Medium),logo:{width:25,height:25},headerLeft:{display:"flex",alignItems:"center",justifyContent:"space-between",width:300},headerRight:{display:"flex",marginLeft:"auto"},headerItem:{display:"flex",cursor:"pointer",textDecoration:"none",color:d.c.ScreenBackground},headerItemActive:{fontWeight:700}},I=r(47),A=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.imageUrl,r=e.info,a=e.style,i=e.imageStyle,o=e.displayKeys,s=void 0===o||o,c=e.onClickImage,l=Object(n.a)({},D.profileContainer,{},a),d=Object(n.a)({},D.image,{},i);return u.a.createElement("div",{style:l},u.a.createElement("div",null,u.a.createElement("img",{alt:"profileImage",className:"art",style:d,src:t,onClick:function(){return c()}})),s&&u.a.createElement("div",{style:D.infoKeys},Object.keys(r).map((function(e){return u.a.createElement("div",{key:e},e)}))),u.a.createElement("div",{style:D.infoValues},Object.keys(r).map((function(e){return u.a.createElement("div",{key:e},r[e])}))))}}]),r}(u.a.Component),D={profileContainer:{display:"flex",justifyContent:"flex-start"},image:{marginRight:d.e.s16},infoKeys:{textAlign:"right",marginRight:d.e.s12},infoValues:{fontWeight:600}}},71:function(e,t,r){e.exports=r.p+"static/media/logo.6111c5a7.png"},79:function(e,t,r){e.exports=r(129)},84:function(e,t,r){},86:function(e,t,r){},91:function(e,t,r){},92:function(e,t,r){}},[[79,1,2]]]);
//# sourceMappingURL=main.81e3b455.chunk.js.map