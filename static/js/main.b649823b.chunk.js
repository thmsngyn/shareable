(this.webpackJsonpshareable=this.webpackJsonpshareable||[]).push([[0],{102:function(e,t,a){e.exports=a(152)},107:function(e,t,a){},109:function(e,t,a){},114:function(e,t,a){},115:function(e,t,a){},152:function(e,t,a){"use strict";a.r(t);var r,n=a(0),o=a.n(n),i=a(10),s=a.n(i),c=(a(107),a(5)),l=a(13),u=a.n(l),h=a(22),d=a(7),p=a(8),m=a(12),f=a(11),g=(a(109),a(38)),y=a(42),v=a(74),b=a.n(v),k=a(93),S=a(24),T=a(76),E=a.n(T);!function(e){e[e.s0=0]="s0",e[e.s2=2]="s2",e[e.s4=4]="s4",e[e.s8=8]="s8",e[e.s12=12]="s12",e[e.s16=16]="s16",e[e.s24=24]="s24",e[e.s32=32]="s32",e[e.s48=48]="s48",e[e.s64=64]="s64",e[e.s128=128]="s128",e[e.s224=224]="s224",e[e.s512=512]="s512"}(r||(r={}));var O,j=r.s48,x=r.s512,w={fontSize:48,lineHeight:"54px"},C={fontSize:28,lineHeight:"36px"},A={fontSize:20,lineHeight:"30px"},I={fontSize:14,lineHeight:"20px"};!function(e){e.ShareableLavender="#6767d7",e.ShareableLightLavender="#7b7bf9",e.c600="#1C2124",e.c500="#66747D",e.c400="#86939C",e.c300="#C7D0D6",e.c200="#E4E9ED",e.c100="#F5F8FA",e.c0="#FFF",e.ScreenBackground="#282c34",e.White="#fff",e.Black="#000",e.Transparent="rgba(52, 52, 52, 0)",e.TransparentDark="rgba(52, 52, 52, 0.9)",e.DisabledText="#ababab",e.DisabledBackground="#ffffff30",e.Header="#273344",e.HeaderSplashMobile="#1d1f1e",e.HeaderSplashDesktop="#2F3B4B"}(O||(O={}));a(114),a(115);var L=a(77),P=a.n(L),D=a(46),_=window.location.hash.substring(1).split("&").reduce((function(e,t){if(t){var a=t.split("=");e[a[0]]=decodeURIComponent(a[1])}return e}),{});function H(e){return e.text().then((function(e){return e?JSON.parse(e):{}}))}window.location.hash="";var U=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.children,a=e.hasError,r=e.isLoading;return a?o.a.createElement(Se,{headerText:"Something bad happened...",subText:"Please refresh the page and try again."},o.a.createElement("div",{style:R.animation},o.a.createElement("lottie-player",{src:"https://assets3.lottiefiles.com/packages/lf20_3x5I70.json",background:"transparent",speed:"1",style:{width:350,height:"auto"},loop:!0,autoplay:!0}))):r?o.a.createElement(Se,null,o.a.createElement("div",{style:R.animation},o.a.createElement("lottie-player",{src:"https://assets8.lottiefiles.com/packages/lf20_6R2HIH.json",background:"transparent",speed:"2",style:{width:350,height:350},loop:!0,autoplay:!0}))):t}}]),a}(o.a.Component),R={animation:{display:"flex",justifyContent:"center"}},M={hasError:!0,isLoading:!1},N=("".concat("http://www.shareable.dev",":3000"),"".concat("http://www.shareable.dev",":4000"),{redirectUri:"http://www.shareable.dev",shareableServiceHostname:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_SHAREABLE_HOSTNAME:"http://www.shareable.dev"}).REACT_APP_SHAREABLE_SERVICE_HOSTNAME,obfuscateDevTools:!0});window.alert(JSON.stringify(N));var B,W,F=Object(c.a)({clientId:"05b0a9e4fb784b1c866f6235ae139c3a",scopes:["user-top-read","user-read-currently-playing","user-read-playback-state","user-library-read","streaming","user-read-email","user-read-private","user-library-modify","user-follow-read"]},N),z=F.shareableServiceHostname,J="".concat(z,"/accounts/login"),K="".concat(z,"/accounts"),q="".concat(z,"/stream"),G="".concat(z,"/stream/share");"".concat(z,"/stream/share");!function(e){e[e.AccountNotFound=1e3]="AccountNotFound",e[e.EntityAlreadyExists=1001]="EntityAlreadyExists",e[e.InvalidAccessSpotifyAccessToken=1002]="InvalidAccessSpotifyAccessToken",e[e.SpotifyAccessTokenExpired=1003]="SpotifyAccessTokenExpired"}(B||(B={})),function(e){e.Followers="followers",e.Self="self"}(W||(W={}));var V,X=a(61);!function(e){e.SpotifyToken="shrbl_spotify_token",e.UserProfile="shrbl_user",e.KeyDecay="shrbl_key_decay",e.ShareableJwt="shrbl_jwt",e.ShareableAccountId="shrbl_account_id"}(V||(V={}));var $,Y=new(function(){function e(){Object(d.a)(this,e),this.storage=localStorage}return Object(p.a)(e,[{key:"get",value:function(e){try{return this.storage.getItem(e)}catch(t){}return null}},{key:"set",value:function(e,t){try{this.storage.setItem(e,t)}catch(a){console.log(a)}}},{key:"setExpiration",value:function(e,t){var a=this.get(V.KeyDecay),r=a&&JSON.parse(a)||{};r[e]=Date.now()+t,this.set(V.KeyDecay,JSON.stringify(r))}},{key:"checkExpiration",value:function(){var e,t=this;if(e=JSON.parse(this.get(V.KeyDecay)||"null")){var a=Date.now();Object.entries(e).forEach((function(r){var n=Object(X.a)(r,2),o=n[0],i=n[1];a<=Number(i)||(t.remove(o),delete e[o])})),this.set(V.KeyDecay,JSON.stringify(e))}}},{key:"remove",value:function(e){try{this.storage.removeItem(e)}catch(t){}}}]),e}()),Q=new(function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,[{key:"login",value:function(e){return this.request(J,"POST",Object(c.a)({},e)).then(this.saveAccountId.bind(this))}},{key:"register",value:function(e){return this.request(K,"POST",Object(c.a)({},e)).then(this.saveAccountId.bind(this))}},{key:"addShare",value:function(e){return this.request(G,"POST",Object(c.a)({},e))}},{key:"getShares",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W.Followers,a=Y.get(V.ShareableAccountId);return this.request("".concat(q,"/").concat(e||a,"?type=").concat(t),"GET")}},{key:"request",value:function(e,t,a){return fetch(e,{method:t,headers:this.headers,body:JSON.stringify(a)}).then(this.saveAuthHeader.bind(this)).then(H).then(this.errorHandler.bind(this))}},{key:"saveAuthHeader",value:function(e){var t=e.headers.get("X-Auth-Token");return t&&Y.set(V.ShareableJwt,t),e}},{key:"errorHandler",value:function(e){e.error;return e}},{key:"saveAccountId",value:function(e){var t=e._id,a=void 0===t?"":t;return a&&Y.set(V.ShareableAccountId,a),e}},{key:"spotifyToken",get:function(){return tt.resolveUserToken()}},{key:"headers",get:function(){return new Headers({"Content-Type":"application/json",Authorization:"Bearer ".concat(Y.get(V.ShareableJwt))||!1,"OAuth-Authorization":"Bearer ".concat(this.spotifyToken)})}}]),e}()),Z=a(18),ee=a(62),te=a(6),ae=a(179),re=a(183);!function(e){e.Primary="primary",e.Secondary="secondary"}($||($={}));var ne=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(e){return Object(d.a)(this,a),t.call(this,e)}return Object(p.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.children,a=e.classes,r=(e.buttonType,Object(ee.a)(e,["children","classes","buttonType"]));return o.a.createElement(ae.a,Object.assign({},r,{className:"".concat(a.root," ").concat(this.secondaryClass," ").concat(a.label)}),t)}},{key:"secondaryClass",get:function(){var e=this.props,t=e.buttonType,a=void 0===t?$.Primary:t,r=e.classes;return a===$.Secondary?r.secondary:""}}]),a}(o.a.Component),oe=Object(te.a)((function(e){var t;return Object(re.a)({root:(t={fontFamily:"Muli",fontWeight:800,color:O.White,background:O.ShareableLavender,height:48,padding:"0 25px",borderRadius:4,letterSpacing:.6},Object(Z.a)(t,e.breakpoints.down("sm"),{width:"100%",margin:"".concat(r.s8,"px 0px")}),Object(Z.a)(t,"&:hover",{backgroundColor:O.ShareableLightLavender}),Object(Z.a)(t,"&:disabled",{color:O.DisabledText,backgroundColor:O.DisabledBackground,border:0}),t),secondary:{background:"transparent",border:"solid",borderWidth:1,borderColor:O.White,"&:hover":{backgroundColor:O.ShareableLavender,borderColor:O.ShareableLavender,borderWidth:1}},label:{textTransform:"none"}})}))(ne),ie=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).state={is_playing:!0,progress_ms:0,hasError:!1,shares:[],isLoading:!1,copyButtonText:"Copy invite link"},r}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),this.setSharesState((function(t){e.setState(M)})).then((function(){e.setState({isLoading:!1})}))}},{key:"setSharesState",value:function(){var e=Object(h.a)(u.a.mark((function e(t){var a,r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props.account,e.next=3,Q.getShares(a.accountId,W.Followers);case 3:if(r=e.sent,!(n=r.code)){e.next=7;break}return e.abrupt("return",t(n));case 7:this.setState({shares:r.shares});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.hasError,r=t.shares,n=void 0===r?[]:r,i=t.isLoading,s=t.copyButtonText,c=this.props.account;return o.a.createElement(U,{hasError:a,isLoading:i},o.a.createElement(Se,{headerText:"Stream",subText:this.streamSubtext},n.length&&n.map((function(e,t){var a=e.account,r=e.metadata;return o.a.createElement(ht,{key:t,track:e.track,account:a,metadata:r})}))||o.a.createElement(oe,{buttonType:$.Secondary,onClick:function(){return navigator.clipboard.writeText("".concat(c.displayName," would like to invite you to Shareable! https://shareable.dev")).then((function(){e.setState({copyButtonText:"Copied!"},(function(){setTimeout((function(){return e.setState({copyButtonText:"Copy invite link"})}),1e3)}))}))}},s)))}},{key:"streamSubtext",get:function(){var e=this.state.shares;return(void 0===e?[]:e).length?"Listen to the latest shares from your friends.":"Your stream is empty, invite your friends to join and share music!"}}]),a}(o.a.Component),se=Object(S.b)((function(e){return{account:e.account}}),void 0)(ie),ce=a(192),le=a(81),ue=a.n(le),he=a(82),de=a.n(he),pe=a(59),me=a.n(pe),fe=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).state={hasError:!1,loggedIn:!1,isLoading:!0,name:"",likes:[],shares:[]},r}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.clearLatestShares();var t=tt.userIsLoggedIn();t&&Promise.all([tt.userProfile().then((function(t){return e.setState({name:t.displayName.split(" ")[0]}),t})),this.setCurrentlyPlayingState((function(t){e.setState(M)})),this.setLikesState((function(t){e.setState(M)}))]).then(function(){var t=Object(h.a)(u.a.mark((function t(a){var r,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(X.a)(a,3),n=r[0],r[1],r[2],t.next=3,e.resolveUser(n);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).then((function(){return e.setSharesState((function(t){e.setState(M)}))})).finally((function(){e.setState({isLoading:!1})})),this.setState({loggedIn:t})}},{key:"setCurrentlyPlayingState",value:function(){var e=Object(h.a)(u.a.mark((function e(t){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tt.getCurrentlyPlaying();case 2:if(a=e.sent,!(r=a.error)){e.next=6;break}return e.abrupt("return",t(r));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"setLikesState",value:function(){var e=Object(h.a)(u.a.mark((function e(t){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tt.getLikes();case 2:if(a=e.sent,!(r=a.error)){e.next=6;break}return e.abrupt("return",t(r));case 6:this.setState({likes:a.items});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"resolveUser",value:function(){var e=Object(h.a)(u.a.mark((function e(t){var a,r,n,o,i,s,c,l,h;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props.setUser,r=t.id,n=t.displayName,o=t.imageUrl,i=t.externalUrl,s={spotifyUserId:r,displayName:n,imageUrl:o,externalUrl:i},e.next=5,Q.login(s);case 5:if(c=e.sent,l=c.code){e.next=11;break}a(c),e.next=17;break;case 11:if(l!==B.AccountNotFound){e.next=17;break}return e.next=14,Q.register(s);case 14:h=e.sent,h.code?this.setState(M):a(h);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setSharesState",value:function(){var e=Object(h.a)(u.a.mark((function e(t){var a,r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props.account,e.next=3,Q.getShares(a.accountId,W.Self);case 3:if(r=e.sent,!(n=r.code)){e.next=7;break}return e.abrupt("return",t(n));case 7:this.setState({shares:r.shares});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.hasError,a=e.loggedIn,i=e.name,s=e.isLoading,c=e.likes,l=e.shares,u=void 0===l?[]:l,h=this.props,d=h.focusedTrack,p=h.latestShares;return o.a.createElement(U,{hasError:t,isLoading:a&&s},!a&&o.a.createElement(n.Fragment,null,o.a.createElement("div",null,o.a.createElement("div",{style:this.responsiveHeroStyle,className:"AppHero-margins"}),o.a.createElement("div",{style:this.responsiveCtaStyle},o.a.createElement("div",{style:ge.headline},"Shareable music experience"),o.a.createElement(Se,{style:ge.welcome,headerText:"Welcome",subText:"Please login with your Spotify credentials to continue."},o.a.createElement(oe,{href:et},"Login with Spotify"))))),a&&o.a.createElement(n.Fragment,null,o.a.createElement(Se,{headerText:"Welcome ".concat(i,"!"),subText:"Play music, view your personalized stats and share with your friends."}),o.a.createElement(Se,{headerText:"Currently playing"},o.a.createElement(ht,{track:d})),o.a.createElement(Se,{headerText:"Shares"},o.a.createElement("div",{style:{marginBottom:r.s16}},"Use the Share"," ",o.a.createElement("span",{style:ge.shareButton},o.a.createElement("img",{style:ge.shareButton,src:me.a}))," ","icon on the player below to post a track."),p.length&&p.map((function(e,t){return o.a.createElement(ht,{key:t,track:e,subduedHeader:"shared a few moments ago"})}))||"",u.length&&u.map((function(e,t){var a=e.track,r=e.metadata;return o.a.createElement(ht,{key:t,track:a,metadata:r})}))||""),o.a.createElement(Se,{headerText:"Likes"},c.map((function(e,t){return o.a.createElement(ht,{key:t,track:e.track})})))))}},{key:"responsiveHeroStyle",get:function(){var e=this.props.width,t=Object(ce.b)("xs",e)?{backgroundImage:"url(".concat(de.a,")"),marginTop:"-".concat(r.s64,"px"),backgroundSize:"cover",height:"800px"}:{backgroundImage:"url(".concat(ue.a,")"),marginTop:"-".concat(r.s512,"px"),backgroundSize:"cover",height:"1300px"};return Object(c.a)({},ge.homeHero,{},t)}},{key:"responsiveCtaStyle",get:function(){var e=this.props.width,t=Object(ce.b)("xs",e)?{marginTop:"-650px"}:{marginTop:"-700px"};return Object(c.a)({},ge.centered,{},t)}}]),a}(o.a.Component),ge={homeHero:{zIndex:0,backgroundRepeat:"no-repeat",width:"100vw",position:"relative",WebkitMaskImage:"linear-gradient(to bottom, rgba(0,0,0,1), rgba(0,0,0,0))"},centered:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginTop:"-700px"},welcome:{zIndex:1,display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",fontWeight:"bold"},headline:Object(c.a)({zIndex:1},w,{marginBottom:r.s64}),shareButton:{width:15,margin:"-".concat(r.s2,"px 1px")}},ye=Object(S.b)((function(e){return{focusedTrack:e.focusedTrack.track,account:e.account,latestShares:e.focusedTrack.latestShares}}),(function(e){return{setUser:function(t){return e(rt(t))},clearLatestShares:function(){return e(nt())}}}))(Object(ce.a)()(fe)),ve=a(153),be=a(83),ke=a.n(be),Se=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.headerText,a=e.subText,r=e.children,n=e.style,i=Object(c.a)({},Te.streamSection,{},n);return o.a.createElement("div",{style:i},t&&o.a.createElement("div",{style:Te.headerText},t),a&&o.a.createElement("div",{style:Te.subText},a),r)}}]),a}(o.a.Component),Te={streamSection:{marginTop:r.s32},headerText:Object(c.a)({marginBottom:r.s16,fontFamily:"Muli",fontWeight:700},A),subText:{marginBottom:r.s16}};var Ee,Oe,je,xe,we=Object(g.f)((function(e){var t=e.history;return Object(n.useEffect)((function(){var e=t.listen((function(){window.scrollTo(0,0)}));return function(){e()}}),[]),null})),Ce=a(184),Ae=a(187),Ie=a(94),Le=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(e){return Object(d.a)(this,a),t.call(this,e)}return Object(p.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.children,a=e.classes,r=Object(ee.a)(e,["children","classes"]);return o.a.createElement(Ce.a,{theme:Pe},o.a.createElement(Ae.a,Object.assign({},r,{className:"".concat(a.root," ").concat(a.label)}),t))}}]),a}(o.a.Component),Pe=Object(Ie.a)({overrides:{MuiInput:{},MuiSelect:{root:{paddingLeft:"".concat(r.s24,"px !important"),paddingRight:"".concat(r.s48,"px !important")},icon:{marginRight:r.s16},select:{"&:focus":{backgroundColor:"transparent"}}},MuiList:{root:{backgroundColor:O.ScreenBackground}},MuiMenuItem:{root:{fontFamily:"Muli",backgroundColor:"transparent",color:O.White,"&$selected":{backgroundColor:O.c600},"&:hover":{backgroundColor:O.c500}}}}}),De=Object(te.a)((function(e){var t;return Object(re.a)({root:(t={color:O.White,background:O.ShareableLavender,height:48,fontWeight:"bold",borderRadius:4,letterSpacing:.6,fontFamily:"Muli"},Object(Z.a)(t,e.breakpoints.down("sm"),{width:"100%"}),Object(Z.a)(t,"&:hover",{backgroundColor:O.ShareableLightLavender}),Object(Z.a)(t,"&:disabled",{color:O.DisabledText,backgroundColor:O.DisabledBackground,border:0}),t),secondary:{background:"transparent",border:"solid",borderWidth:1,borderColor:O.White,"&:hover":{backgroundColor:O.ShareableLavender,borderColor:O.ShareableLavender,borderWidth:1}},label:{textTransform:"none"}})}))(Le),_e=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).state={hasError:!1,userProfile:{}},r}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setUserProfile((function(){e.setState({hasError:!0})}))}},{key:"setUserProfile",value:function(){var e=Object(h.a)(u.a.mark((function e(t){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tt.userProfile();case 2:if(a=e.sent,!(r=a.error)){e.next=6;break}return e.abrupt("return",t(r));case 6:this.setState({userProfile:a});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){Object.keys(V).forEach((function(e){return Y.remove(V[e])})),tt.logout(),this.props.history.push("/"),window.location.reload()}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,r=a.hasError,n=a.userProfile;return o.a.createElement(U,{hasError:r,isLoading:!1},o.a.createElement(Se,{headerText:"Account information"},o.a.createElement(st,{imageClassName:t.image,imageUrl:n.imageUrl||ke.a,onClickImage:function(){return window.open(n.externalUrl,"_blank")},info:{name:n.displayName,followers:"".concat(n.followers)},displayKeys:!0})),o.a.createElement(Se,null,o.a.createElement(oe,{buttonType:$.Secondary,onClick:function(){e.logout()}},"Logout")))}}]),a}(o.a.Component),He=Object(te.a)((function(e){return Object(ve.a)({image:Object(Z.a)({width:"150px !important",height:"150px !important"},e.breakpoints.down("sm"),{width:"100px !important",height:"100px !important"})})}))(_e),Ue=a(189),Re=a(85),Me=a.n(Re),Ne=a(86),Be=a.n(Ne);!function(e){e.ShortTerm="short_term",e.MediumTerm="medium_term",e.LongTerm="long_term"}(Ee||(Ee={})),function(e){e.Artists="artists",e.Tracks="tracks"}(Oe||(Oe={})),function(e){e.TokenExpired="The access token expired"}(je||(je={}));var We,Fe=(xe={},Object(Z.a)(xe,Ee.ShortTerm,"Last 4 weeks"),Object(Z.a)(xe,Ee.MediumTerm,"Last 6 months"),Object(Z.a)(xe,Ee.LongTerm,"All time"),xe),ze=[Ee.ShortTerm,Ee.MediumTerm,Ee.LongTerm],Je=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).maxTopPageOffset=5,r.topLimit=10,r.state={topArtistsTimeRange:Ee.ShortTerm,topTracksTimeRange:Ee.ShortTerm,topArtists:[],topTracks:[],hasError:!1,isLoading:!0,topArtistsPage:0,topTracksPage:0,topArtistsTotal:0,topTracksTotal:0},r}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setTopsState((function(){return e.setState(M)}))}},{key:"setTopsState",value:function(){var e=Object(h.a)(u.a.mark((function e(t){var a,r,n,o,i,s,c,l,h,d,p,m,f,g,y;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.state,r=a.topArtistsTimeRange,n=a.topTracksTimeRange,o=a.topArtistsPage,i=a.topTracksPage,e.next=3,tt.getTop(Oe.Artists,r,this.topLimit,o*this.topLimit);case 3:return s=e.sent,e.next=6,tt.getTop(Oe.Tracks,n,this.topLimit,i*this.topLimit);case 6:if(c=e.sent,l=s.error,h=s.items,d=void 0===h?[]:h,p=s.total,m=c.error,f=c.items,g=void 0===f?[]:f,y=c.total,!l&&!m){e.next=11;break}return e.abrupt("return",t(l,m));case 11:this.setState({topArtists:d,topTracks:g,topArtistsTotal:p,topTracksTotal:y,isLoading:!1});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleSelect",value:function(e,t){var a,r=this,n=e.target.value,o=t===Oe.Artists?"topArtistsTimeRange":"topTracksTimeRange",i=t===Oe.Artists?"topArtistsPage":"topTracksPage";this.setState((a={},Object(Z.a)(a,o,n),Object(Z.a)(a,i,0),a),(function(){r.setTopsState((function(){return r.setState(M)})),r.scrollTopTypeStart(t)}))}},{key:"renderTimeRangeButtons",value:function(e){var t=this,a=e===Oe.Artists?"topArtistsTimeRange":"topTracksTimeRange";return o.a.createElement("div",{style:Object(c.a)({},Ke.row,{},Ke.timeToggle)},o.a.createElement(De,{value:this.state[a],onChange:function(a){return t.handleSelect(a,e)}},ze.map((function(e,t){return o.a.createElement(Ue.a,{key:t,value:e},Fe[e])}))))}},{key:"scrollTopTypeStart",value:function(e){var t=document.getElementById(e);t&&(t.scrollLeft=0)}},{key:"incrementPage",value:function(e,t){var a=this,r=e===Oe.Artists?"topArtistsPage":"topTracksPage";this.setState((function(e){var n=e[r],o=n+t>=a.maxTopPageOffset?0:n+t;return Object(Z.a)({},r,o)}),(function(){a.setTopsState((function(){return a.setState(M)})),a.scrollTopTypeStart(e)}))}},{key:"hasNextPage",value:function(e){var t=e===Oe.Artists?"topArtists":"topTracks",a=this.state["".concat(t,"Page")],r=this.state["".concat(t,"Total")];return a+1<this.maxTopPageOffset&&(a+1)*this.topLimit<r}},{key:"renderPageChange",value:function(e){var t=this,a=e===Oe.Artists?"topArtists":"topTracks",r=this.state["".concat(a,"Page")],n=this.state["".concat(a,"Total")];return o.a.createElement("div",{style:Object(c.a)({},Ke.row,{},Ke.pageToggle)},o.a.createElement(oe,{style:{width:"auto"},disabled:0===r,buttonType:$.Secondary,onClick:function(){return t.incrementPage(e,-1)}},"Back"),o.a.createElement(oe,{style:{width:"auto"},disabled:!this.hasNextPage(e),buttonType:$.Secondary,onClick:function(){return t.incrementPage(e,1)}},"Next"),o.a.createElement("div",{style:{color:O.c300}},"Page ",r+1," of ",Math.floor(n/this.topLimit)))}},{key:"responsiveProfileStyles",value:function(e){var t=this.props.width,a=Object(ce.b)("sm",t)?{width:e===Oe.Artists?"90%":"80%",marginRight:r.s16,marginBottom:r.s16}:{};return Object(c.a)({},Ke.profile,{},a)}},{key:"getImageUrl",value:function(e,t){var a=e.images,r=void 0===a?[]:a;return r.length&&r[0]&&r[0].url||t}},{key:"render",value:function(){var e=this,t=this.state,a=t.hasError,r=t.topArtists,n=t.topTracks,i=t.isLoading,s=t.topArtistsPage,c=t.topTracksPage;return o.a.createElement(U,{hasError:a,isLoading:i},o.a.createElement("div",null,o.a.createElement(Se,{headerText:"Top artists"},this.renderTimeRangeButtons(Oe.Artists),o.a.createElement("div",{id:Oe.Artists,style:this.responsiveRowStyle},r&&r.map((function(t,a){return o.a.createElement(st,{key:a,style:e.responsiveProfileStyles(Oe.Artists),imageStyle:Ke.image,imageUrl:e.getImageUrl(t,Be.a),onClickImage:function(){return window.open(t.external_urls.spotify,"_blank")},displayKeys:!1,info:{rank:"".concat(a+10*s+1),name:t.name,genres:t.genres.slice(0,4).join(", ")}})}))),this.renderPageChange(Oe.Artists))),o.a.createElement("div",null,o.a.createElement(Se,{headerText:"Top tracks"},this.renderTimeRangeButtons(Oe.Tracks),o.a.createElement("div",{id:Oe.Tracks,style:this.responsiveRowStyle},n&&n.map((function(t,a){return o.a.createElement(st,{key:a,style:e.responsiveProfileStyles(Oe.Tracks),imageStyle:Ke.image,imageUrl:e.getImageUrl(t.album,Me.a),onClickImage:function(){return e.props.playSong(t)},displayKeys:!1,info:{rank:"".concat(a+10*c+1),title:t.name,artist:t.artists[0].name},circular:!1})}))),this.renderPageChange(Oe.Tracks))))}},{key:"responsiveRowStyle",get:function(){var e=this.props.width,t=Object(ce.b)("xs",e)?{overflowX:"auto",height:"260px",width:"100%"}:{height:Object(ce.c)("lg",e)?"600px":"auto"};return Object(c.a)({},Ke.row,{flexDirection:"column",flexWrap:"wrap",alignItems:"flex-start",justifyContent:"none"},t)}}]),a}(o.a.Component),Ke={row:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between",marginBottom:r.s16,scrollBehavior:"smooth"},profile:{width:500,marginBottom:r.s12,marginRight:r.s48},image:{width:100,height:100},timeToggle:{marginBottom:r.s24},pageToggle:{maxWidth:"300px",flexWrap:"nowrap"}},qe=Object(S.b)(void 0,(function(e){return{playSong:function(t){return e(ot(t))}}}))(Object(ce.a)()(Je)),Ge=[{path:"/",page:ye,header:"shareable"},{path:"/stats",page:qe,header:"stats"},{path:"/stream",page:se,header:"stream"},{path:"/account",page:He,header:"account",rightAlignedHeader:!0}],Ve="".concat("https://api.spotify.com","/v1/me/player"),Xe="".concat("https://api.spotify.com","/v1/me/tracks"),$e="".concat("https://api.spotify.com","/v1/me"),Ye="".concat("https://api.spotify.com","/v1/me/top"),Qe="".concat("https://api.spotify.com","/v1/me/player/play"),Ze="".concat("https://api.spotify.com","/v1/tracks"),et="".concat("https://accounts.spotify.com/authorize","?client_id=").concat(F.clientId,"&redirect_uri=").concat(F.redirectUri,"&scope=").concat(F.scopes.join("%20"),"&response_type=token&show_dialog=true"),tt=new(function(){function e(){Object(d.a)(this,e),this.token=""}return Object(p.a)(e,[{key:"resolveTokenInStorage",value:function(e,t){e?Y.checkExpiration():(Y.set(V.SpotifyToken,t),Y.setExpiration(V.SpotifyToken,36e6))}},{key:"logout",value:function(){this.token=""}},{key:"userProfile",value:function(){var e=Object(h.a)(u.a.mark((function e(){var t,a,r,n,o,i,s,c,l,h,d,p,m,f;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Y.get(V.UserProfile)){e.next=13;break}return e.next=4,this.getUserProfile();case 4:return a=e.sent,r=a.display_name,n=a.external_urls,o=a.images,i=a.email,s=a.country,c=a.followers,l=a.error,h=a.uri,d=a.id,p=o&&o.length&&o[0].url||"",m=n&&n.spotify,f={displayName:r,externalUrl:m,email:i,country:s,imageUrl:p,followers:c&&c.total,error:l,uri:h,id:d},Y.set(V.UserProfile,JSON.stringify(f)),e.abrupt("return",f);case 13:return e.abrupt("return",JSON.parse(t));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"userIsLoggedIn",value:function(){return!!this.token}},{key:"resolveUserToken",value:function(){this.token=_.access_token;var e=Y.get(V.SpotifyToken);return e||this.token?(this.token=e||this.token,this.resolveTokenInStorage(!!e,this.token),this.token):""}},{key:"getUserProfile",value:function(){return this.request($e,"GET")}},{key:"getCurrentlyPlaying",value:function(){return this.request(Ve,"GET")}},{key:"transferPlayback",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.request(Ve,"PUT",{device_ids:e,play:t})}},{key:"getLikes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.request("".concat(Xe,"?limit=").concat(e,"&offset=").concat(t),"GET")}},{key:"getTop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ee.ShortTerm,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this.request("".concat(Ye,"/").concat(e,"?limit=").concat(a,"&offset=").concat(r,"&time_range=").concat(t),"GET")}},{key:"playSongs",value:function(e){return this.request("".concat(Qe),"PUT",{uris:e})}},{key:"getTracks",value:function(e){var t=e.length?"&ids=".concat(encodeURIComponent(e.join(","))):"";return t?this.request("".concat(Ze,"?").concat(t),"GET"):new Promise((function(e){return e([])}))}},{key:"request",value:function(e,t,a){return fetch(e,{method:t,headers:this.headers,body:JSON.stringify(a)}).then(H).then(this.errorHandler.bind(this))}},{key:"errorHandler",value:function(e){var t=e.error;if(t)switch(t.message){case je.TokenExpired:Y.remove(V.SpotifyToken)}return e}},{key:"headers",get:function(){return new Headers({Authorization:"Bearer "+this.token})}}]),e}());!function(e){e.PAUSE_FOCUSED="PAUSE_FOCUSED",e.SET_FOCUSED="SET_FOCUSED",e.SET_USER="SET_USER",e.SET_SHARED="SET_SHARED",e.CLEAR_LATEST_SHARES="CLEAR_LATEST_SHARES"}(We||(We={}));var at=function(e){return Object(D.action)(We.SET_FOCUSED,e)},rt=function(e){return Object(D.action)(We.SET_USER,e)},nt=function(){return Object(D.action)(We.CLEAR_LATEST_SHARES)},ot=function(e){return function(t){tt.playSongs([e.uri]),t(at(e))}},it=function(){return function(e,t){var a=t(),r=a.focusedTrack.track.id,n=a.account.accountId,o=a.focusedTrack,i={trackId:r,accountId:n};Q.addShare(i).then((function(t){var a;t.code!==B.EntityAlreadyExists&&e((a=o.track,Object(D.action)(We.SET_SHARED,a)))}))}},st=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).state={imageDimensions:{height:150,width:150}},r}return Object(p.a)(a,[{key:"componentDidMount",value:function(){}},{key:"onImgLoad",value:function(e){var t=e.target;this.setState({imageDimensions:{height:t.offsetHeight,width:t.offsetWidth}})}},{key:"render",value:function(){var e=this.props,t=e.imageUrl,a=e.info,r=e.style,n=e.imageStyle,i=e.displayKeys,s=void 0===i||i,l=e.onClickImage,u=e.circular,h=void 0===u||u,d=e.imageClassName,p=Object(c.a)({},ct.profileContainer,{},r),m=Object(c.a)({},ct.imageContainer,{},n,{borderRadius:h?"50%":void 0}),f=Object(c.a)({},ct.image,{},this.landscapeImgStyle,{},this.portraitImgStyle);return o.a.createElement("div",{style:p},o.a.createElement("div",null,o.a.createElement("div",{className:d,style:m},o.a.createElement("img",{className:"art",onLoad:this.onImgLoad.bind(this),alt:"profileImage",style:f,src:t,onClick:function(){return l&&l()}}))),o.a.createElement("div",{style:ct.infoContainer},s&&a&&o.a.createElement("div",{style:ct.infoKeys},Object.keys(a).map((function(e){return o.a.createElement("div",{key:e},e)}))),o.a.createElement("div",{style:ct.infoValues},a&&Object.keys(a).map((function(e){return o.a.createElement("div",{key:e},a[e])})))))}},{key:"isLandscape",get:function(){var e=this.state.imageDimensions,t=e.width,a=e.height;if(!t||!a)return!1;var r=t/a;return t>a&&Math.abs(r)>=1.2}},{key:"isPortrait",get:function(){var e=this.state.imageDimensions,t=e.width,a=e.height;if(!t||!a)return!1;var r=t/a;return a>t&&Math.abs(r)<=.9}},{key:"landscapeImgStyle",get:function(){var e=this.state.imageDimensions.width;return this.isLandscape?{marginLeft:-e/8,width:"auto",height:"100%"}:{}}},{key:"portraitImgStyle",get:function(){return this.isPortrait?{width:"100%",height:"auto"}:{}}}]),a}(o.a.Component),ct={profileContainer:{display:"flex",justifyContent:"flex-start"},imageContainer:{display:"inline-block",position:"relative",overflow:"hidden",borderRadius:"50%",width:100,height:100},image:{width:"auto",height:"100%"},infoKeys:{textAlign:"right",marginRight:r.s12,color:O.c400},infoValues:{fontWeight:600},infoContainer:{display:"flex",marginLeft:r.s16}},lt=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"renderArtists",value:function(){var e=this.props.track;return o.a.createElement("div",{style:ut.artistName},e.artists.map((function(e){return e.name})).join(", "))}},{key:"renderTrackTitle",value:function(){var e=this.props.track;return o.a.createElement("div",{style:ut.trackTitle},e.name)}},{key:"hasData",value:function(e){return e&&e.artists&&e.album&&e.album.images&&e.album.images.length&&e.album.images[0].url}},{key:"renderTimestamp",value:function(){var e=this.props.metadata;return o.a.createElement("span",{style:ut.metadata},e&&"shared "+function(e){var t=Math.floor(new Date(Date.now()-e).getTime()/1e3),a=Math.floor(t/31536e3);return a>=1?a+" year".concat(a>1?"s":""," ago"):(a=Math.floor(t/2592e3))>=1?a+" month".concat(a>1?"s":""," ago"):(a=Math.floor(t/86400))>=1?a+" day".concat(a>1?"s":""," ago"):(a=Math.floor(t/3600))>=1?a+" hour".concat(a>1?"s":""," ago"):(a=Math.floor(t/60))>=1?a+" minute".concat(a>1?"s":""," ago"):Math.floor(t)+" second".concat(a>1?"s":""," ago")}(new Date(e.createdAt).getTime())+" on "+new Date(e.createdAt).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}))}},{key:"renderMetadata",value:function(){var e=this.props,t=e.account,a=e.metadata;if(t||a){var n=t||{},i=n.imageUrl,s=n.externalUrl;return i&&""!==i||(i=P.a),o.a.createElement("div",{style:ut.metadataContainer},t&&o.a.createElement("div",{style:Object(c.a)({},ut.row)},o.a.createElement(st,{style:{width:25,height:25,alignItems:"center",marginRight:r.s8},imageStyle:{width:25,height:25},imageUrl:i,onClickImage:function(){return s&&window.open(s,"_blank")}}),o.a.createElement("div",null,(t.displayName||t.spotifyUserId)+" ",this.renderTimestamp())),!t&&this.renderTimestamp())}}},{key:"renderSubduedHeader",value:function(){var e=this.props.subduedHeader;if(e)return o.a.createElement("div",{style:ut.metadataContainer},o.a.createElement("span",{style:ut.metadata},e))}},{key:"render",value:function(){var e=this,t=this.props.track;return o.a.createElement("div",{className:"track",style:ut.track},this.hasData(t)?o.a.createElement("div",{style:ut.column},this.renderSubduedHeader(),this.renderMetadata(),o.a.createElement("div",{style:ut.row},o.a.createElement("div",{style:ut.coverArt},o.a.createElement("img",{alt:"trackImage",className:"art",src:t.album.images[0].url,onClick:function(){return e.props.playSong(t)}})),o.a.createElement("div",{className:"track__content"},this.renderArtists(),this.renderTrackTitle()))):o.a.createElement("div",null,"Nothing found"))}}]),a}(o.a.Component),ut={row:{display:"flex",flexDirection:"row"},column:{display:"flex",flexDirection:"column"},metadataContainer:{marginBottom:r.s12},artistName:Object(c.a)({},I),track:{marginBottom:r.s24},coverArt:{marginRight:r.s16},trackTitle:Object(c.a)({},C),metadata:{color:O.c400}},ht=Object(S.b)(void 0,(function(e){return{playSong:function(t){return e(ot(t))}}}))(lt),dt=a(87),pt=a.n(dt),mt=a(190),ft=a(191),gt=a(88),yt=a.n(gt),vt=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).state={toastOpen:!1},r}return Object(p.a)(a,[{key:"handleShare",value:function(){var e=this.props.shareSong;this.setState({toastOpen:!0},(function(){return e()}))}},{key:"handleClose",value:function(e,t){"clickaway"!==t&&this.setState({toastOpen:!1})}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.classes,r=(e.shareSong,e.isShared,this.state.toastOpen);return o.a.createElement("div",{className:t},o.a.createElement(mt.a,{title:o.a.createElement("div",{className:a.multiFont},"Share"),arrow:!0},o.a.createElement("div",{className:a.img,onClick:this.handleShare.bind(this)})),o.a.createElement(ft.a,{ContentProps:{classes:{root:a.multiFont}},style:{marginTop:j},anchorOrigin:{vertical:"top",horizontal:"center"},open:r,autoHideDuration:4e3,onClose:this.handleClose.bind(this),message:"Track shared to your followers"}))}}]),a}(o.a.Component),bt=Object(S.b)((function(e){return{isShared:e.focusedTrack.isShared}}),(function(e){return{shareSong:function(){return e(it())}}}))(Object(te.a)((function(e){return Object(re.a)({img:{cursor:"pointer",backgroundRepeat:"no-repeat",backgroundImage:"url(".concat(yt.a,")"),width:22,height:22,transition:"all 0.6s ease-in-out","&:hover":{backgroundImage:"url(".concat(me.a,")")}},multiFont:{fontFamily:"Muli"}})}))(vt)),kt=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).state={token:"",deviceId:"",playerIsActive:!1},r}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=tt.resolveUserToken();e&&this.setState({token:e})}},{key:"setDevice",value:function(e,t){!this.state.deviceId&&e&&(t||(this.setState({deviceId:e}),tt.transferPlayback([e])))}},{key:"syncCurrentlyPlaying",value:function(e){var t=this;(e.artists||e.id||e.name)&&tt.getTracks([e.id]).then((function(e){var a=e.tracks;if(a&&a.length){var r=a[0];t.props.setFocusedTrack(r)}}))}},{key:"handlePlayerCallback",value:function(e){var t=e.deviceId,a=e.isActive,r=e.track;this.setDevice(t,a),this.syncCurrentlyPlaying(r),this.setState({playerIsActive:a})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.isMobile,r=this.state.playerIsActive;return o.a.createElement("div",{className:t.container},r&&o.a.createElement(bt,{className:t.repost}),o.a.createElement(pt.a,{name:"Shareable Web Player (".concat(a?"Mobile":"Desktop",")"),styles:St,token:this.state.token,autoPlay:!0,showSaveIcon:!0,persistDeviceSelection:!0,callback:this.handlePlayerCallback.bind(this)}))}}]),a}(o.a.Component),St={sliderColor:O.ShareableLavender,savedColor:O.ShareableLavender,bgColor:O.Header,color:O.White,trackNameColor:O.White,trackArtistColor:O.White,sliderTrackColor:O.c500},Tt={setFocusedTrack:at},Et=Object(S.b)(void 0,Tt)(Object(te.a)((function(e){return Object(re.a)({container:{display:"flex",flexDirection:"row"},playerStyles:St,repost:Object(Z.a)({display:"flex",justifyContent:"center",alignItems:"center",position:"fixed",backgroundColor:"transparent",marginLeft:r.s64,width:50,height:50,left:"50%",bottom:0,zIndex:1},e.breakpoints.down("xs"),{marginLeft:0,left:0})})}))(kt)),Ot=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return o.a.createElement("div",{style:jt.footer},o.a.createElement(Et,this.props))}}]),a}(o.a.Component),jt={footer:{position:"fixed",left:0,bottom:0,width:"100%"}},xt=a(90),wt=a.n(xt),Ct=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"componentDidMount",value:function(){}},{key:"renderHeaderItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=function(e){return!e.header||e.header&&!0===e.rightAlignedHeader},a=function(e){return!e.header||e.header&&!e.rightAlignedHeader};return Ge.filter((function(r){return e?t(r):a(r)})).map((function(e){return o.a.createElement(y.b,{key:e.path,exact:!0,to:e.path,style:At.headerItem,activeStyle:At.headerItemActive},e.header)}))}},{key:"render",value:function(){return o.a.createElement("div",{style:At.header},o.a.createElement("div",{style:this.responsiveHeaderStyle,className:"AppHeader-padding"},o.a.createElement("div",{style:this.responsiveLeftHeaderStyle},o.a.createElement(y.b,{exact:!0,to:"/",style:At.headerItem,activeStyle:At.headerItemActive},o.a.createElement("img",{style:At.logo,src:wt.a,alt:"logo"})),this.renderHeaderItem()),o.a.createElement("div",{style:At.headerRight},this.renderHeaderItem(!0))))}},{key:"splashBgColor",get:function(){var e=this.props,t=e.loggedIn,a=e.width;return!t&&(Object(ce.b)("xs",a)?{backgroundColor:O.HeaderSplashMobile}:{backgroundColor:O.HeaderSplashDesktop})||{}}},{key:"responsiveHeaderStyle",get:function(){var e=this.props.width,t=Object(c.a)({},At.headerContents,{},this.splashBgColor);return Object(ce.b)("xs",e)&&(t=Object(c.a)({},t,{fontSize:t.fontSize-6})),t}},{key:"responsiveLeftHeaderStyle",get:function(){var e=this.props.isMobile;return Object(c.a)({},At.headerLeft,{width:e?250:300})}}]),a}(o.a.Component),At={header:{width:"100%",position:"fixed",left:0,top:0,backgroundColor:O.Header,height:j,zIndex:2},headerContents:Object(c.a)({display:"flex",alignItems:"center",height:"100%"},A),logo:{width:20,height:20},headerLeft:{display:"flex",alignItems:"center",justifyContent:"space-between",width:300},headerRight:{display:"flex",marginLeft:"auto"},headerItem:{display:"flex",cursor:"pointer",textDecoration:"none",color:O.White},headerItemActive:{fontWeight:700}},It=Object(ce.a)()(Ct),Lt=a(33),Pt=a(91),Dt=a(92),_t=a(95),Ht={track:{},isPlaying:!1,isShared:!1,latestShares:[]},Ut={accountId:"",spotifyUserId:""},Rt=Object(Lt.combineReducers)({focusedTrack:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case We.SET_FOCUSED:var a=e.track,r=(a=void 0===a?{}:a).id;return t.payload&&r!==t.payload.id?Object(c.a)({},e,{track:t.payload,isPlaying:!0,isShared:!1}):e;case We.PAUSE_FOCUSED:return Object(c.a)({},e,{track:t.payload,isPlaying:!1});case We.SET_SHARED:return e.latestShares.find((function(e){return e.id===t.payload.id}))?Object(c.a)({},e,{isShared:!0}):Object(c.a)({},e,{isShared:!0,latestShares:[t.payload].concat(Object(_t.a)(e.latestShares))});case We.CLEAR_LATEST_SHARES:return Object(c.a)({},e,{latestShares:[]});default:return e}},account:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case We.SET_USER:var a=t.payload._id;return Object(c.a)({},e,{},t.payload,{accountId:a});default:return e}}}),Mt=[Dt.a],Nt=F.obfuscateDevTools?Object(Lt.createStore)(Rt,Lt.applyMiddleware.apply(void 0,Mt)):Object(Lt.createStore)(Rt,Object(Pt.composeWithDevTools)(Lt.applyMiddleware.apply(void 0,Mt))),Bt=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).state={loggedIn:!1},r}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(h.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=tt.resolveUserToken(),this.setState({loggedIn:!!t});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderRoutes",value:function(){var e=this.state.loggedIn,t=this.props.isMobile,a=Object(c.a)({},Ft.routeContainer);return o.a.createElement("div",{style:a,className:"App-margins"},!e&&o.a.createElement(ye,null),e&&o.a.createElement(g.c,null,Ge.map((function(e){var a=e.path,r=e.page;return o.a.createElement(g.a,{key:e.path,exact:!0,path:a,render:function(e){return o.a.createElement(r,Object.assign({},e,{isMobile:t}))}})})),";"))}},{key:"render",value:function(){var e=this.state.loggedIn,t=this.props.isMobile;return o.a.createElement(S.a,{store:Nt},o.a.createElement(y.a,null,o.a.createElement(we,null),o.a.createElement("div",{style:Ft.app},o.a.createElement(It,{loggedIn:e,isMobile:t}),this.renderRoutes(),e&&o.a.createElement(Ot,{isMobile:t}))))}}]),a}(o.a.Component),Wt=Object(k.hot)(b()((function(e){return{isMobile:e.width<480}}))(Bt)),Ft={app:{backgroundImage:"linear-gradient(to top, rgba(24, 13, 34, 0.52), rgba(2, 10, 26, 0.78)), url(".concat(E.a,")"),backgroundSize:"100% 100%",minHeight:"100vh",display:"flex",flexDirection:"column",color:O.c100,fontFamily:"Muli",fontWeight:500},routeContainer:{marginTop:j,marginBottom:x,paddingTop:r.s24}};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(o.a.Fragment,null,o.a.createElement(Wt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},59:function(e,t,a){e.exports=a.p+"static/media/share-filled-white.44787756.svg"},76:function(e,t,a){e.exports=a.p+"static/media/bg.336ebad2.jpg"},77:function(e,t,a){e.exports=a.p+"static/media/default-profile.2f498bc4.svg"},81:function(e,t,a){e.exports=a.p+"static/media/people.a16ab3be.jpg"},82:function(e,t,a){e.exports=a.p+"static/media/person.50578c96.jpg"},83:function(e,t,a){e.exports=a.p+"static/media/badminton.c7bae4fd.png"},85:function(e,t,a){e.exports=a.p+"static/media/pineapple.e4427de6.svg"},86:function(e,t,a){e.exports=a.p+"static/media/dinosaur.206b712e.svg"},88:function(e,t,a){e.exports=a.p+"static/media/share-white.d41f832a.svg"},90:function(e,t,a){e.exports=a.p+"static/media/logo-white.ae32626f.svg"}},[[102,1,2]]]);
//# sourceMappingURL=main.b649823b.chunk.js.map